---
import { getCollection } from "astro:content";
const projects = await getCollection("projects");

const mainProjects = projects.slice(0, 3);
---

<section class="relative h-screen mt-40 section">
  <header
    class="h-[20vh] bg-white w-full flex flex-col items-center justify-end"
  >
    <h2
      class="text-3xl font-bold text-transparent uppercase md:text-6xl font-titan-one bg-clip-text bg-linear-to-b from-sky-500 dark:from-white via-blue-600 dark:via-gray-400 to-sky-400 dark:to-white drop-shadow-lg drop-shadow-blue-800/60"
    >
      Proyectos Destacados
    </h2>
    <p
      class="mt-2 mb-4 text-center text-gray-600 drop-shadow-md z-100 font-Bowlby-one dark:text-gray-300"
    >
      Aquí tienes una selección de mis proyectos más destacados.
    </p>
  </header>
  <div class="projects-content-container h-[80vh]">
    {
      mainProjects.map((project) => {
        const { slug, data } = project;
        const { title, description, skills, image } = data;

        return (
          <div class="h-full project-content">
            <div class="flex flex-col w-full p-10 md:flex-row ">
              <div class="w-full h-full md:w-2/5">
                <img
                  src={image}
                  alt={title}
                  class="object-cover max-w-full rounded-lg shadow-lg"
                />
              </div>
              <div class="w-full px-10 mt-5 text-center md:w-auto">
                <h3 class="text-2xl font-bold">{title}</h3>
                <p>{description}</p>
              </div>
            </div>
          </div>
        );
      })
    }
  </div>
</section>

<style>
  .projects-content-container {
    overflow-y: scroll;
    scroll-snap-type: y proximity;
  }

  .project-content {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }

  .project-content:nth-child(odd) {
    background-color: #f0f4f8;
  }

  .project-content:nth-child(even) {
    background-color: #e0e7ff;
  }

  .projects-content-container {
    animation: img-reveal linear both;
    animation-timeline: view();
    animation-range: entry 20% cover 30%;
  }

  .project-content {
    animation: reveal linear both;
    animation-timeline: view();
    animation-range: entry 30% cover 50%;
  }

  .project-content img {
    animation: img-reveal linear both;
    animation-timeline: view();
    animation-range: entry 40% cover 60%;
  }

  @keyframes img-reveal {
    from {
      scale: 0.5;
      opacity: 0;
      translate: 0 100px;
    }

    to {
      scale: 1;
      opacity: 1;
      translate: 0 0;
    }
  }

  @keyframes reveal {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }
</style>
