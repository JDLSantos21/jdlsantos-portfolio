---
import { projects } from "@/mocks/topProjects";
---

<section class="relative h-screen mt-40 section">
  <header
    class="h-[20vh] bg-white w-full flex flex-col items-center justify-end"
  >
    <h2
      class="text-3xl font-bold text-transparent uppercase md:text-6xl font-titan-one bg-clip-text bg-linear-to-b from-sky-500 dark:from-white via-blue-600 dark:via-gray-400 to-sky-400 dark:to-white drop-shadow-lg drop-shadow-blue-800/60"
    >
      Proyectos Destacados
    </h2>
    <p
      class="mt-2 mb-4 text-center text-gray-600 drop-shadow-md z-100 font-Bowlby-one dark:text-gray-300"
    >
      Aquí tienes una selección de mis proyectos más destacados.
    </p>
  </header>

  <ul class="carousel h-[75vh] mx-auto w-full md:w-[90%] lg:w-[75%]">
    {
      projects.map((project) => {
        return (
          <li class="min-w-full inline-block h-full p-5">
            <div class="flex flex-col xl:flex-row p-10 lg:w-full xl:h-full">
              <figure class="w-1/2 xl:min-w-xl mx-auto">
                <img
                  src={`/images/projects/${project.slug}.webp`}
                  alt={project.title}
                  class="object-cover max-w-full rounded-lg shadow-lg"
                />
              </figure>
              <div class="w-full px-10 mt-5 lg:text-left md:w-auto">
                <h3 class="text-2xl font-bold">{project.title}</h3>
                <p class="text-pretty">{project.description}</p>
              </div>
            </div>
          </li>
        );
      })
    }
  </ul>
</section>

<style>
  .carousel {
    display: flex;
    overflow-x: scroll;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
    anchor-name: --carousel;
    scroll-timeline-name: --carousel-timeline;
    scroll-timeline-axis: inline;

    &::scroll-button(*) {
      position: absolute;
      border-radius: 100%;
      height: 2.5rem;
      width: 2.5rem;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border: 1px solid #e5e5e5;
      font-size: 1.5rem;
      cursor: pointer;
      position-anchor: --carousel;
      font-family: "Material Symbols Outlined";
      transition:
        background-color 0.3s ease,
        box-shadow 0.3s ease;
    }

    &::scroll-button(*):hover {
      background-color: #e0e7ff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }

    &::scroll-button(right) {
      left: calc(anchor(right) + 1rem);
      position-area: inline-end center;
      content: "arrow_forward" / "Next";
    }

    &::scroll-button(left) {
      position-area: inline-start center;
      right: calc(anchor(left) + 1rem);
      content: "arrow_back" / "Previous";
    }
  }

  .carousel li {
    scroll-snap-align: center;
  }

  .carousel li {
    scroll-snap-align: center;
    animation: img-reveal linear both;
    animation-timeline: --carousel-timeline;
  }

  .carousel li:first-child {
    animation-range:
      entry 0% cover 0%,
      entry 10% cover 20%;
  }

  .carousel li:nth-child(2) {
    animation-range: entry 25% cover 50%;
  }

  .carousel li:last-child() {
    animation-range: entry 75% cover 100%;
  }

  @keyframes img-reveal {
    from {
      scale: 0.5;
      opacity: 0;
      translate: 0 100px;
    }

    to {
      scale: 1;
      opacity: 1;
      translate: 0 0;
    }
  }

  @keyframes reveal {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }
</style>
